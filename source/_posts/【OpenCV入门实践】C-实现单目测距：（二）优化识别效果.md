---
title: 【OpenCV入门实践】C++实现单目测距：（二）优化识别效果
tags:
  - 教程
  - OpenCV
  - 单目测距
  - 识别
  - 计算机视觉
post-index: true
categories: Dev
linkhash: '4f544c6d1a541a43'
date: 2023-05-26 01:43:10
---

 > 先叠甲：本人在实践和探索过程中不可避免地参考了大量文章，并有可能把相应的内容反映到本文中。如您认为您的权利受到侵犯，请与我联系。

在本系列博文中，我们将识别目标小球，并在小球直径已知的条件下实现单目测距。笔者使用的语言是C++，环境是Ubuntu 20.04 LTS x64。  
本文是系列文章的第二篇。在这篇文章里，我们将实现**对小球的识别效果的优化**。  
本文假设你：
 - 会基本的C++语法；
 - 知道OpenCV的一些基本知识；
 - 有一个摄像头；
 - 有一个（些）单色小球；
如果你还不满足以上的一点或几点，你也可以先看下去，遇到有问题的地方再稍事解决。  
让我们继续吧。  

# 降噪

书接上文。我们之前虽然已经实现了对画面中圆形的识别，但其效果并不能令人满意。一个重要的原因是，霍夫圆检测是**噪声敏感**的。画面中的噪声容易对圆的检测造成不小的干扰，因此在检测前首先将图像降噪。
对图像的降噪有多种方式。例如，直接进行高斯滤波：
```cpp
GaussianBlur(gray, gray, cv::Size(5, 5), 0);
```
高斯模糊的前两个参数是源图像和目标图像。第三个参数是卷积核的大小，可以自行调整。注意必须是奇数。
或者，可以尝试其他的降噪：
```cpp
fastNlMeansDenoising(gray, gray, 20);
```
前两个参数是源图像和目标图像。第三个参数是降噪强度。

# 直方图均衡以提高对比度

直方图均衡的目的是加强灰度图的对比度。

```cpp
equalizeHist(gray, gray);
```

> 另，忙于琐事，咕了许久；然而本节内容少，更是没什么好写的。近日再更。
> 有计划写一个Git教程，以帮助新入学的学弟学妹也。同时督促我读*Pro Git*。